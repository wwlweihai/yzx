function config(localStorageServiceProvider,$ionicConfigProvider,RestangularProvider){localStorageServiceProvider.setPrefix("cn.rocksw.yzx").setStorageType("localStorage").setNotify(!0,!0),RestangularProvider.setBaseUrl("https://leancloud.cn/1.1"),RestangularProvider.setDefaultHeaders({"X-AVOSCloud-Application-Id":"zXmsYkXYionV4s9pHc3IKghD","X-AVOSCloud-Application-Key":"gHmRen4R5I3ziAE7wcP7vKw1"}),$ionicConfigProvider.views.transition("platform"),$ionicConfigProvider.tabs.position("bottom"),$ionicConfigProvider.backButton.text("").icon("ion-ios-arrow-left").previousTitleText(!1),$ionicConfigProvider.views.maxCache(0)}function routeConfig($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/tab/index"),$stateProvider.state("tab",{cache:!1,url:"/tab","abstract":!0,templateUrl:"modules/tabs.html",controller:"tabs"})}function pushRun(){}function yzxFreeExperience(){function link(scope,element,attrs){}var directive={link:link,templateUrl:"modules/components/yzxFreeExperience/yzxFreeExperience.html",controller:"yzxFreeExperience",scope:{},restrict:"EA"};return directive}function yzxFreeExperience(rockswIonicToast,$scope){function experience(){rockswIonicToast.show("报名体验成功")}$scope.experience=experience}function tabs($rootScope,$state){$rootScope.$on("$ionicView.beforeEnter",function(){var stateName=$state.current.name;"tab.index"===stateName||"tab.style"===stateName||"tab.service"===stateName||"tab.self"===stateName?$rootScope.hideTabs=!1:$rootScope.hideTabs=!0})}function indexConfig($stateProvider){$stateProvider.state("tab.index",{url:"/index",views:{"tab-index":{templateUrl:"modules/index/index.html",controller:"index"}}}).state("tab.event",{url:"/event",views:{"tab-index":{templateUrl:"modules/index/event/event.html"}}}).state("tab.eventDetail",{url:"/eventDetail",views:{"tab-index":{templateUrl:"modules/index/event/eventDetail/eventDetail.html"}}}).state("tab.msg",{url:"/msg",views:{"tab-index":{templateUrl:"modules/index/msg/msg.html"}}}).state("tab.msgDetail",{url:"/msgDetail",views:{"tab-index":{templateUrl:"modules/index/msgDetail/msgDetail.html"}}}).state("tab.8+n",{url:"/8+n",views:{"tab-index":{templateUrl:"modules/index/8+n/8+n.html"}}}).state("tab.46xbz",{url:"/46xbz",views:{"tab-index":{templateUrl:"modules/index/46xbz/46xbz.html"}}}).state("tab.djsj",{url:"/djsj",views:{"tab-index":{templateUrl:"modules/index/djsj/djsj.html"}}}).state("tab.dxjg",{url:"/dxjg",views:{"tab-index":{templateUrl:"modules/index/dxjg/dxjg.html"}}}).state("tab.jpgj",{url:"/jpgj",views:{"tab-index":{templateUrl:"modules/index/jpgj/jpgj.html"}}}).state("tab.yxpp",{url:"/yxpp",views:{"tab-index":{templateUrl:"modules/index/yxpp/yxpp.html"}}}).state("tab.yzjq",{url:"/yzjq",views:{"tab-index":{templateUrl:"modules/index/yzjq/yzjq.html"}}}).state("tab.zygr",{url:"/zygr",views:{"tab-index":{templateUrl:"modules/index/zygr/zygr.html"}}})}function index(rockswIonicToast,Restangular,$state,$scope){function signToday(){rockswIonicToast.show("签到成功")}$scope.signToday=signToday}function styleConfig($stateProvider){$stateProvider.state("tab.style",{url:"/style",views:{"tab-style":{templateUrl:"modules/style/style.html"}}}).state("tab.styleDetail",{url:"/styleDetail",views:{"tab-style":{templateUrl:"modules/style/styleDetail/styleDetail.html"}}}).state("tab.experience",{url:"/experience",views:{"tab-style":{templateUrl:"modules/style/experience/experience.html"}}})}function serviceConfig($stateProvider){$stateProvider.state("tab.service",{url:"/service",views:{"tab-service":{templateUrl:"modules/service/service.html"}}}).state("tab.checkOut",{url:"/checkOut",views:{"tab-service":{templateUrl:"modules/service/checkOut/checkOut.html"}}}).state("tab.superior",{url:"/superior",views:{"tab-service":{templateUrl:"modules/service/superior/superior.html"}}}).state("tab.team",{url:"/team",views:{"tab-service":{templateUrl:"modules/service/team/team.html"}}}).state("tab.housekeeper",{url:"/housekeeper",views:{"tab-service":{templateUrl:"modules/service/housekeeper/housekeeper.html"}}}).state("tab.quote",{url:"/quote",views:{"tab-service":{templateUrl:"modules/service/quote/quote.html",controller:"quote"}}}).state("tab.quoteResult",{url:"/quoteResult",params:{quotePrice:"10000"},views:{"tab-service":{templateUrl:"modules/service/quote/quoteResult/quoteResult.html",controller:"quoteResult"}}})}function quote(rockswIonicToast,Restangular,$state,$rootScope,$scope){function subquote(formValidated){if(formValidated){var quotePrice=$scope.form.area*Number($scope.form.taocan.price)*1.5;$scope.form.area="",$state.go("tab.quoteResult",{quotePrice:quotePrice})}else rockswIonicToast.show("请正确输入房屋面积")}$scope.form={},$scope.subquote=subquote,$scope.taocanList=[{name:"实惠型",price:368},{name:"时尚型",price:568},{name:"豪华型",price:698}],$scope.form.taocan=$scope.taocanList[0]}function quoteResult($stateParams,$scope){$scope.quotePrice=$stateParams.quotePrice}function selfConfig($stateProvider){$stateProvider.state("tab.self",{url:"/self",views:{"tab-self":{templateUrl:"modules/self/self.html",controller:"self"}}}).state("tab.signIn",{url:"/signIn",views:{"tab-self":{templateUrl:"modules/self/signIn/signIn.html",controller:"signIn"}}}).state("tab.signUp",{url:"/signUp",views:{"tab-self":{templateUrl:"modules/self/signUp/signUp.html",controller:"signUp"}}}).state("tab.information",{url:"/information",views:{"tab-self":{templateUrl:"modules/self/information/information.html",controller:"information"}}}).state("tab.collection",{url:"/collection",views:{"tab-self":{templateUrl:"modules/self/collection/collection.html"}}}).state("tab.jifen",{url:"/jifen",views:{"tab-self":{templateUrl:"modules/self/jifen/jifen.html"}}}).state("tab.feedback",{url:"/feedback",views:{"tab-self":{templateUrl:"modules/self/feedback/feedback.html"}}}).state("tab.recommendation",{url:"/recommendation",views:{"tab-self":{templateUrl:"modules/self/recommendation/recommendation.html"}}}).state("tab.setting",{url:"/setting",views:{"tab-self":{templateUrl:"modules/self/setting/setting.html",controller:"setting"}}})}function self(Restangular,$state,$scope){console.log("self")}function signIn(rockswIonicToast,Restangular,$state,$rootScope,$scope){function subSignIn(formValidated){function signInSuc(){return function(data){if(console.log(data),data){rockswIonicToast.show("登录成功");var globals={currentUser:{id:data.objectId,username:data.username,sessionToken:data.sessionToken}};$state.go("tab.self",null,{reload:!0}),$rootScope.$broadcast("userSignIn",globals)}else console.log(data.mobilePhoneNumber),rockswIonicToast.show("请验证手机号")}}function signInErr(){return function(error){console.log(error.data);var errorCode=error.data.code;211==errorCode&&rockswIonicToast.show("用户名不存在"),210==errorCode&&rockswIonicToast.show("用户名和密码不匹配")}}formValidated?signInReq.get($scope.form,null).then(signInSuc(),signInErr()):rockswIonicToast.show("请输入用户名和密码")}var signInReq=Restangular.one("login");$scope.form={},$scope.subSignIn=subSignIn}function signUp(signUpService,rockswIonicToast,Restangular,$ionicModal,$timeout,$rootScope,$state,$scope){function subSignUp(){function signUpSuc(){return function(data){console.log(data),data&&(globals={currentUser:{id:data.objectId,username:data.username,sessionToken:data.sessionToken}},$scope.isSendVerifyCode=!0,$scope.verifyPhoneCodeModal.show(),verifyCodeBtnTout=$timeout(function(){$scope.isSendVerifyCode=!1},timeInterval))}}function signUpErr(){return function(error){console.log(error.data);var errorCode=error.data.code;214==errorCode&&rockswIonicToast.show("手机号码已经注册!")}}signUpService.subSignUp($scope.form,signUpSuc(),signUpErr())}function subVerifyCode(){function verifyCodeSuc(){return function(data){console.log(data),data&&(rockswIonicToast.show("注册成功"),$rootScope.$broadcast("userSignIn",globals),closeModal(),$state.go("tab.self",null,{reload:!0}))}}function verifyCodeErr(){return function(error){603==errorCode&&rockswIonicToast.show("验证码错误!")}}var phoneCode=$scope.data.verifyCode;console.log(phoneCode),signUpService.subVerifyCode(phoneCode,verifyCodeSuc(),verifyCodeErr())}function cancelVerifyPhone(){function cancelSuc(){return function(data){rockswIonicToast.show("取消验证成功,请重新注册!"),closeModal()}}function cancelErr(){return function(error){rockswIonicToast.show("取消验证失败,请联系管理员注册!")}}var sessionHeader={"X-AVOSCloud-Session-Token":globals.currentUser.sessionToken};signUpService.deleteUser(globals.currentUser.id,sessionHeader,cancelSuc(),cancelErr())}function closeModal(){cancelVerifyCodeBtnTout(),$scope.verifyPhoneCodeModal.hide()}function cancelVerifyCodeBtnTout(){console.log("cancelVerifyCodeBtnTout"),$timeout.cancel(verifyCodeBtnTout)}var globals,verifyCodeBtnTout,timeInterval=6e4;$scope.form={},$scope.form.mobilePhoneNumber="",$scope.data={},$scope.isSendVerifyCode=!1,$scope.subSignUp=subSignUp,$scope.subVerifyCode=subVerifyCode,$scope.closeModal=closeModal,$scope.cancelVerifyPhone=cancelVerifyPhone,$ionicModal.fromTemplateUrl("modules/self/signUp/verifyPhoneCodeModal.html",{scope:$scope,animation:"slide-in-up"}).then(function(modal){$scope.verifyPhoneCodeModal=modal})}function signUpService(Restangular){function subSignUp(elementToPost,successCall,errorCall){signUpReq.post(null,elementToPost,null,header).then(function(data){successCall(data)},function(error){errorCall(error)})}function subVerifyCode(phoneCode,successCall,errorCall){verifyPhoneCodeReq.post(phoneCode,null,null,header).then(function(data){successCall(data)},function(error){errorCall(error)})}function deleteUser(userId,sessionHeader,successCall,errorCall){var deleteReq=Restangular.one("users",userId);deleteReq.remove(null,sessionHeader).then(function(data){successCall(data)},function(error){errorCall(error)})}var header={"Content-Type":"application/json"},signUpReq=Restangular.one("users"),verifyPhoneCodeReq=Restangular.one("verifyMobilePhone"),service={subSignUp:subSignUp,subVerifyCode:subVerifyCode,deleteUser:deleteUser};return service}function information(Restangular,$state,$scope){$scope.showPopup=function(){$scope.data={};var myPopup=$ionicPopup.show({template:'<input type="password" ng-model="data.wifi">',title:"Enter Wi-Fi Password",subTitle:"Please use normal things",scope:$scope,buttons:[{text:"Cancel"},{text:"<b>Save</b>",type:"button-positive",onTap:function(e){return $scope.data.wifi?$scope.data.wifi:void e.preventDefault()}}]});myPopup.then(function(res){console.log("Tapped!",res)}),$timeout(function(){myPopup.close()},3e3)}}function setting(Restangular,$state,$rootScope,$scope){function signOut(){$rootScope.$broadcast("userSignOut",null),$state.go("tab.self")}$scope.signOut=signOut}angular.module("app.core",["ionic","rockswIonicComp","LocalStorageModule","restangular"]),angular.module("app.run",[]),angular.module("app.value",[]),angular.module("app.config",["ionic","app.value"]),angular.module("app.service",[]),angular.module("app.controller",[]),angular.module("app.directive",[]),angular.module("app",["app.core","app.value","app.config","app.service","app.directive","app.controller","app.run"]).run(function(localStorageService,$rootScope,$ionicHistory,$ionicPlatform,$ionicPopup){function activited(){$rootScope.globals=localStorageService.get("globals")||{},$rootScope.globals.currentUser?$rootScope.isLogin=!0:$rootScope.isLogin=!1}ionic.Platform.ready(function(){activited()}),$rootScope.$on("userSignIn",function(event,data){localStorageService.set("globals",data),activited()}),$rootScope.$on("userSignOut",function(event,data){localStorageService.remove("globals"),$ionicHistory.clearCache(),activited()}),$ionicPlatform.registerBackButtonAction(function(){var confirmPopup=$ionicPopup.confirm({title:"易装修",template:"确定要退出程序？",cancelText:"取消",okText:"确定"});confirmPopup.then(function(res){res&&ionic.Platform.exitApp()})},100)}),angular.module("app.config").config(["localStorageServiceProvider","$ionicConfigProvider","RestangularProvider",config]),angular.module("app.config").config(["$stateProvider","$urlRouterProvider",routeConfig]),angular.module("app.run").run([pushRun]),angular.module("app.directive").directive("yzxFreeExperience",yzxFreeExperience),angular.module("app.controller").controller("yzxFreeExperience",yzxFreeExperience),yzxFreeExperience.$inject=["rockswIonicToast","$scope"],angular.module("app.controller").controller("tabs",tabs),tabs.$inject=["$rootScope","$state","$scope"],angular.module("app.config").config(["$stateProvider",indexConfig]),angular.module("app.controller").controller("index",index),index.$inject=["rockswIonicToast","Restangular","$state","$scope"],angular.module("app.config").config(["$stateProvider",styleConfig]),angular.module("app.config").config(["$stateProvider",serviceConfig]),angular.module("app.controller").controller("quote",quote),quote.$inject=["rockswIonicToast","Restangular","$state","$rootScope","$scope"],angular.module("app.controller").controller("quoteResult",quoteResult),quoteResult.$inject=["$stateParams","$scope"],angular.module("app.config").config(["$stateProvider",selfConfig]),angular.module("app.controller").controller("self",self),self.$inject=["Restangular","$state","$scope"],angular.module("app.controller").controller("signIn",signIn),signIn.$inject=["rockswIonicToast","Restangular","$state","$rootScope","$scope"],angular.module("app.controller").controller("signUp",signUp),signUp.$inject=["signUpService","rockswIonicToast","Restangular","$ionicModal","$timeout","$rootScope","$state","$scope"],angular.module("app.service").factory("signUpService",signUpService),signUpService.$inject=["Restangular"],angular.module("app.controller").controller("information",information),information.$inject=["Restangular","$state","$scope"],angular.module("app.controller").controller("setting",setting),setting.$inject=["Restangular","$state","$rootScope","$scope"],angular.module("rockswIonicComp",["ionic"]).run(["$templateCache",function($templateCache){var toastTemplate='<div class="ionic_toast" ng-class="ionicToast.toastClass" ng-style="ionicToast.toastStyle" ng-click="hide()"><span class="ionic_toast_close" ng-click="hide()"><i class="ion-close-round toast_close_icon"></i></span><span ng-bind-html="ionicToast.toastMessage"></span></div>';$templateCache.put("ionic-toast/templates/ionic-toast.html",toastTemplate)}]).provider("rockswIonicToast",function(){this.$get=["$compile","$document","$interval","$rootScope","$templateCache","$timeout",function($compile,$document,$interval,$rootScope,$templateCache,$timeout){var toastTimeout,defaultScope={toastClass:"",toastMessage:"",toastStyle:{display:"none",opacity:0}},toastPosition={top:"ionic_toast_top",middle:"ionic_toast_middle",bottom:"ionic_toast_bottom"},toastScope=$rootScope.$new(),toastTemplate=$compile($templateCache.get("ionic-toast/templates/ionic-toast.html"))(toastScope);toastScope.ionicToast=defaultScope,$document.find("body").append(toastTemplate);var toggleDisplayOfToast=function(display,opacity,callback){toastScope.ionicToast.toastStyle={display:display,opacity:opacity},toastScope.ionicToast.toastStyle.opacity=opacity,callback()};return toastScope.hide=function(){toggleDisplayOfToast("none",0,function(){})},{show:function(message,position,closeBtn,duration){message&&(duration||(duration=2e3),position||(position="bottom"),$timeout.cancel(toastTimeout),duration>5e3&&(duration=5e3),angular.extend(toastScope.ionicToast,{toastClass:toastPosition[position]+" "+(closeBtn?"ionic_toast_sticky":""),toastMessage:message}),toggleDisplayOfToast("block",1,function(){closeBtn||(toastTimeout=$timeout(function(){toastScope.hide()},duration))}))},hide:function(){toastScope.hide()}}}]});